---
- name: Install i3 package
  apt: name={{ item }} state=present
  with_items:
      - i3
      - i3status
      - terminator
      - python-pip
      - xfce4-panel
      - gnome-control-center
      - xbacklight
      - feh
      - touchegg
      - lm-sensors
      - lxterminal
      - lxpanel
      - xdotool
      - rofi
      - cinnamon-control-center # for sount-applet
      - ibus-chewing

      - boxes
      - libnotify-bin
      - zenity
      - toilet
      - whiptail

      - dunst
  sudo: yes
  when: ansible_distribution == 'Ubuntu'

- name: Install zsh package
  dnf: name={{ item }} state=present
  with_items:
   - i3
   - libX11-devel
   - libXext-devel
   - libXinerama-devel
   - libXft-devel
   - dmenu
   - lxterminal
   - i3status
   - conky
  sudo: yes
  when: ansible_distribution == 'Fedora'

- name: remove useless package for i3
  apt: name={{ item }} state=absent
  with_items:
    - xfce4-notifyd
    - notify-osd
  when: ansible_distribution == 'Ubuntu'
  ignore_errors: yes

- name: Install python package for i3
  pip: name={{ item }}
  with_items:
      - i3-py
      - quickswitch-i3
      - py3status
  sudo: yes

- name: download dmenu  source code
  get_url: url="{{ dmenu_download_url }}" dest=/tmp/dmenu.tar.gz mode=0440

- unarchive: src=/tmp/dmenu.tar.gz
             dest=/tmp/

- name: change dmenu font
  lineinfile: dest=/tmp/dmenu-{{ dmenu_version }}/config.def.h
              regexp='"monospace:size=10"' state=present
              line='"monospace:size=19"'

- name: change dmenu font
  lineinfile: dest=/tmp/dmenu-{{ dmenu_version }}/config.mk
              regexp="\$\{X11INC\}/freetype2"
              state=absent

- name: generate fish configure
  command: "{{ item }}"
  args:
    chdir: "/tmp/dmenu-{{ dmenu_version }}"
  with_items:
    - make
    - "make install"
  sudo: yes
  when: ansible_distribution == 'Ubuntu'
