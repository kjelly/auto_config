---
- name: remove vim from apt
  apt: name=vim state=absent
  when: (ansible_distribution == "Debian" or ansible_distribution == 'Ubuntu') and programming == true
  ignore_errors: yes
  become: true

- name: Install packages
  apt: name={{ item }} state=present
  with_items:
   - libncurses5-dev
   - libncursesw5-dev
   - exuberant-ctags
   - cmake # for YouCompleteMe
   - python3-dev
   - "silversearcher-ag"
   - ruby
   - "ruby-dev"
   - "python3-pip"
   - libtool # for neovim
   - pkgconf # for neovim
   - automake # for neovim
   - luarocks # for neovim
   - m4 # for neovim
   - python-virtualenv # for neovim
   - ncurses-dev  # for neovim

  become: true
  when: programming == true

- name: Install vim package
  apt: name={{ item }} state=present
  with_items:
   - vim
   - libncurses5-dev
   - libncursesw5-dev
   - gawk
   - exuberant-ctags
   - cmake # for YouCompleteMe
   - libsm-dev
   - ruby
   - "ruby-dev"
   - libsm-dev
  become: true
  when: ansible_distribution == 'Debian' and programming == false
