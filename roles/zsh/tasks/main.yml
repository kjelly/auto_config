---

- name: Install zsh package
  apt: name={{ item }} state=installed
  with_items:
   - zsh
   - git
  sudo: yes

- git: repo=https://github.com/robbyrussell/oh-my-zsh.git
       dest="~/.oh-my-zsh"
       depth=1

#- command: "cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc"
#  args:
#      creates: "~/.zshrc"

- template: src=zshrc dest=~/.zshrc mode=0644


- command: "touch ~/.local_zshrc"
  args:
      creates: "~/.local_zshrc"

- lineinfile: dest=~/.zshrc line="setopt append_history no_inc_append_history no_share_history"

- lineinfile: dest=~/.zshrc line="export PATH=\"`pwd`/mybin/:$PATH\""
- lineinfile: dest=~/.zshrc line="source ~/.local_zshrc"
- lineinfile: dest=~/.zshrc line="export GOPATH=~/GOPATH"
